/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
DROP TABLE person IF EXISTS
CREATE TABLE person ( firstName VARCHAR(20), lastName VARCHAR(20), school VARCHAR(20), rollNumber int)
INSERT INTO PERSON VALUES('Henry','Donald','Little Garden',1234901)
INSERT INTO PERSON VALUES('Eric','Osborne','Little Garden',1234991)
DROP TABLE BATCH_STEP_EXECUTION_CONTEXT IF EXISTS
DROP TABLE BATCH_JOB_EXECUTION_CONTEXT IF EXISTS
DROP TABLE BATCH_STEP_EXECUTION IF EXISTS
DROP TABLE BATCH_JOB_EXECUTION_PARAMS IF EXISTS
DROP TABLE BATCH_JOB_EXECUTION IF EXISTS
DROP TABLE BATCH_JOB_INSTANCE IF EXISTS
DROP TABLE BATCH_STEP_EXECUTION_SEQ IF EXISTS
DROP TABLE BATCH_JOB_EXECUTION_SEQ IF EXISTS
DROP TABLE BATCH_JOB_SEQ IF EXISTS
CREATE TABLE BATCH_JOB_INSTANCE ( JOB_INSTANCE_ID BIGINT IDENTITY NOT NULL PRIMARY KEY , VERSION BIGINT , JOB_NAME VARCHAR(100) NOT NULL, JOB_KEY VARCHAR(32) NOT NULL, constraint JOB_INST_UN unique (JOB_NAME, JOB_KEY) ) 
CREATE TABLE BATCH_JOB_EXECUTION ( JOB_EXECUTION_ID BIGINT IDENTITY NOT NULL PRIMARY KEY , VERSION BIGINT , JOB_INSTANCE_ID BIGINT NOT NULL, CREATE_TIME TIMESTAMP NOT NULL, START_TIME TIMESTAMP DEFAULT NULL , END_TIME TIMESTAMP DEFAULT NULL , STATUS VARCHAR(10) , EXIT_CODE VARCHAR(2500) , EXIT_MESSAGE VARCHAR(2500) , LAST_UPDATED TIMESTAMP, JOB_CONFIGURATION_LOCATION VARCHAR(2500) NULL, constraint JOB_INST_EXEC_FK foreign key (JOB_INSTANCE_ID) references BATCH_JOB_INSTANCE(JOB_INSTANCE_ID) ) 
CREATE TABLE BATCH_JOB_EXECUTION_PARAMS ( JOB_EXECUTION_ID BIGINT NOT NULL , TYPE_CD VARCHAR(6) NOT NULL , KEY_NAME VARCHAR(100) NOT NULL , STRING_VAL VARCHAR(250) , DATE_VAL TIMESTAMP DEFAULT NULL , LONG_VAL BIGINT , DOUBLE_VAL DOUBLE PRECISION , IDENTIFYING CHAR(1) NOT NULL , constraint JOB_EXEC_PARAMS_FK foreign key (JOB_EXECUTION_ID) references BATCH_JOB_EXECUTION(JOB_EXECUTION_ID) ) 
CREATE TABLE BATCH_STEP_EXECUTION ( STEP_EXECUTION_ID BIGINT IDENTITY NOT NULL PRIMARY KEY , VERSION BIGINT NOT NULL, STEP_NAME VARCHAR(100) NOT NULL, JOB_EXECUTION_ID BIGINT NOT NULL, START_TIME TIMESTAMP NOT NULL , END_TIME TIMESTAMP DEFAULT NULL , STATUS VARCHAR(10) , COMMIT_COUNT BIGINT , READ_COUNT BIGINT , FILTER_COUNT BIGINT , WRITE_COUNT BIGINT , READ_SKIP_COUNT BIGINT , WRITE_SKIP_COUNT BIGINT , PROCESS_SKIP_COUNT BIGINT , ROLLBACK_COUNT BIGINT , EXIT_CODE VARCHAR(2500) , EXIT_MESSAGE VARCHAR(2500) , LAST_UPDATED TIMESTAMP, constraint JOB_EXEC_STEP_FK foreign key (JOB_EXECUTION_ID) references BATCH_JOB_EXECUTION(JOB_EXECUTION_ID) ) 
CREATE TABLE BATCH_STEP_EXECUTION_CONTEXT ( STEP_EXECUTION_ID BIGINT NOT NULL PRIMARY KEY, SHORT_CONTEXT VARCHAR(2500) NOT NULL, SERIALIZED_CONTEXT LONGVARCHAR , constraint STEP_EXEC_CTX_FK foreign key (STEP_EXECUTION_ID) references BATCH_STEP_EXECUTION(STEP_EXECUTION_ID) ) 
CREATE TABLE BATCH_JOB_EXECUTION_CONTEXT ( JOB_EXECUTION_ID BIGINT NOT NULL PRIMARY KEY, SHORT_CONTEXT VARCHAR(2500) NOT NULL, SERIALIZED_CONTEXT LONGVARCHAR , constraint JOB_EXEC_CTX_FK foreign key (JOB_EXECUTION_ID) references BATCH_JOB_EXECUTION(JOB_EXECUTION_ID) ) 
CREATE TABLE BATCH_STEP_EXECUTION_SEQ ( ID BIGINT IDENTITY )
CREATE TABLE BATCH_JOB_EXECUTION_SEQ ( ID BIGINT IDENTITY )
CREATE TABLE BATCH_JOB_SEQ ( ID BIGINT IDENTITY )
INSERT INTO BATCH_JOB_SEQ VALUES(0)
INSERT INTO BATCH_JOB_INSTANCE VALUES(0,0,'myJob','d41d8cd98f00b204e9800998ecf8427e')
INSERT INTO BATCH_JOB_EXECUTION_SEQ VALUES(0)
INSERT INTO BATCH_JOB_EXECUTION VALUES(0,0,0,'2016-03-12 22:28:10.091000000',NULL,NULL,'STARTING','UNKNOWN','','2016-03-12 22:28:10.092000000',NULL)
INSERT INTO BATCH_JOB_EXECUTION_CONTEXT VALUES(0,'{"map":[""]}',NULL)
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=0
INSERT INTO BATCH_JOB_EXECUTION VALUES(0,1,0,'2016-03-12 22:28:10.091000000','2016-03-12 22:28:10.130000000',NULL,'STARTED','UNKNOWN','','2016-03-12 22:28:10.130000000',NULL)
SET AUTOCOMMIT TRUE
INSERT INTO BATCH_STEP_EXECUTION_SEQ VALUES(0)
INSERT INTO BATCH_STEP_EXECUTION VALUES(0,0,'step1',0,'2016-03-12 22:28:10.151000000',NULL,'STARTING',0,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:10.151000000')
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(0,'{"map":[""]}',NULL)
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION VALUES(0,1,'step1',0,'2016-03-12 22:28:10.155000000',NULL,'STARTED',0,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:10.155000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(0,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(0,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION VALUES(0,2,'step1',0,'2016-03-12 22:28:10.155000000',NULL,'STARTED',1,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:10.171000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(0,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=0
INSERT INTO BATCH_STEP_EXECUTION VALUES(0,3,'step1',0,'2016-03-12 22:28:10.155000000','2016-03-12 22:28:10.173000000','COMPLETED',1,0,0,0,0,0,0,0,'COMPLETED','','2016-03-12 22:28:10.173000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION_CONTEXT WHERE JOB_EXECUTION_ID=0
INSERT INTO BATCH_JOB_EXECUTION_CONTEXT VALUES(0,'{"map":[""]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=0
INSERT INTO BATCH_JOB_EXECUTION VALUES(0,2,0,'2016-03-12 22:28:10.091000000','2016-03-12 22:28:10.130000000','2016-03-12 22:28:10.177000000','COMPLETED','COMPLETED','','2016-03-12 22:28:10.177000000',NULL)
SET AUTOCOMMIT TRUE
INSERT INTO BATCH_JOB_EXECUTION_SEQ VALUES(1)
DELETE FROM BATCH_JOB_EXECUTION_SEQ WHERE ID=0
INSERT INTO BATCH_JOB_EXECUTION VALUES(1,0,0,'2016-03-12 22:28:15.037000000',NULL,NULL,'STARTING','UNKNOWN','','2016-03-12 22:28:15.037000000',NULL)
INSERT INTO BATCH_JOB_EXECUTION_CONTEXT VALUES(1,'{"map":[""]}',NULL)
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=1
INSERT INTO BATCH_JOB_EXECUTION VALUES(1,1,0,'2016-03-12 22:28:15.037000000','2016-03-12 22:28:15.041000000',NULL,'STARTED','UNKNOWN','','2016-03-12 22:28:15.042000000',NULL)
SET AUTOCOMMIT TRUE
INSERT INTO BATCH_STEP_EXECUTION_SEQ VALUES(1)
DELETE FROM BATCH_STEP_EXECUTION_SEQ WHERE ID=0
INSERT INTO BATCH_STEP_EXECUTION VALUES(1,0,'step1',1,'2016-03-12 22:28:15.058000000',NULL,'STARTING',0,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:15.058000000')
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(1,'{"map":[""]}',NULL)
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION VALUES(1,1,'step1',1,'2016-03-12 22:28:15.062000000',NULL,'STARTED',0,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:15.062000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(1,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(1,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION VALUES(1,2,'step1',1,'2016-03-12 22:28:15.062000000',NULL,'STARTED',1,0,0,0,0,0,0,0,'EXECUTING','','2016-03-12 22:28:15.068000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION_CONTEXT WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION_CONTEXT VALUES(1,'{"map":[{"entry":[{"string":["batch.taskletType","com.javacodegeeks.example.util.MyTasklet"]},{"string":["batch.stepType","org.springframework.batch.core.step.tasklet.TaskletStep"]}]}]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_STEP_EXECUTION WHERE STEP_EXECUTION_ID=1
INSERT INTO BATCH_STEP_EXECUTION VALUES(1,3,'step1',1,'2016-03-12 22:28:15.062000000','2016-03-12 22:28:15.070000000','COMPLETED',1,0,0,0,0,0,0,0,'COMPLETED','','2016-03-12 22:28:15.070000000')
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION_CONTEXT WHERE JOB_EXECUTION_ID=1
INSERT INTO BATCH_JOB_EXECUTION_CONTEXT VALUES(1,'{"map":[""]}',NULL)
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM BATCH_JOB_EXECUTION WHERE JOB_EXECUTION_ID=1
INSERT INTO BATCH_JOB_EXECUTION VALUES(1,2,0,'2016-03-12 22:28:15.037000000','2016-03-12 22:28:15.041000000','2016-03-12 22:28:15.072000000','COMPLETED','COMPLETED','','2016-03-12 22:28:15.073000000',NULL)
SET AUTOCOMMIT TRUE
